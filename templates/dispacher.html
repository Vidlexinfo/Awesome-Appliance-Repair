{% extends "layout.html" %}
{% block body %}
<script type="text/javascript">

$(document).ready(function() {

    $(".closeme").bind('click', function(ev){
        $(".error").hide();
    });
    
    $("#jobs-table").tablesorter();
});

</script>


<div style="padding: 16px">
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes error">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<h1>{{ title }}</h1>
<h3>Hello {{ user }}</h3>
    <div id="jobs-table-div">
        <table id="jobs-table" class="tablesorter">
        <thead><tr><th>job_ID</th><th>cust_ID</th><th>Last Name</th><th>Make</th><th>Appliance</th><th>Job Status</th><th>Appointment Date</th><th>Description</th></tr></thead>
            <tbody id="result">        
                {% for row in result %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
<hr />
<p>{{ses}}</p>
<pre>{{reqenviron|pprint()}}</pre>

{% if error %}
    <p class=error ><img class='closeme' src="static/images/close.png" /><strong>Error:</strong> {{ error }}</p>
{% endif %}

</div>
{% endblock %}
<table>
{% for row in table %}
  <tr>
  {% set rowloop = loop %}
  {% for cell in row %}
    <td id="cell-{{ rowloop.index }}-{{ loop.index }}>{{ cell }}</td>
  {% endfor %}
  </tr>
{% endfor %}
</table>